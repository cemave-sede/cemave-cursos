cursos = c(3, 21, 34, 13, 21))
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
cursos_estado <- data.frame(
UF = c("AM", "BA", "CE", "DF", "ES", "MA", "MG", "MS", "MT", "PA", "PB", "PE", "PI", "PR", "RJ", "RN", "RS", "SC", "SP", "RO", "RR", "AC", "TO", "SE", "AL", "GO", "AP"),
cursos = c(1, 2, 4, 22, 2, 2, 1, 9, 3, 2, 6, 4, 1, 4, 3, 2, 11, 6, 7, 0, 0, 0, 0, 0, 0, 0, 0))
dados_mapa = mapa_estado %>%
left_join(cursos_estado)
bins <- c(0, 4, 8, 12, 14, 16, 20, 24)
qpal = colorBin("Blues", dados_mapa$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_estados <- dados_mapa %>%
leaflet() %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal(dados_mapa$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa$cursos,
pal = qpal,
position = "bottomleft",
title = "Cursos por estado")
mapa_cursos_estados
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
bins <- c(0, 10, 20, 30, 40)
qpal2 = colorBin("Blues", dados_mapa_regiao$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa_regiao$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_regiao <- dados_mapa_regiao %>%
leaflet() %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal2(dados_mapa_regiao$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa_regiao$cursos,
pal = qpal2,
position = "bottomleft",
title = "Cursos por região")
mapa_cursos_regiao
dados_mapa_regiao <- dados_mapa_regiao %>% st_transform(WGS84)
dados_mapa_regiao <- dados_mapa_regiao %>% st_transform(4326)
mapa_regiao <- mapa_regiao %>% st_transform(4326)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
mapa_estado <- mapa_estado %>% st_transform(4326)
dados_mapa = mapa_estado %>%
left_join(cursos_estado)
cursos_estado <- data.frame(
UF = c("AM", "BA", "CE", "DF", "ES", "MA", "MG", "MS", "MT", "PA", "PB", "PE", "PI", "PR", "RJ", "RN", "RS", "SC", "SP", "RO", "RR", "AC", "TO", "SE", "AL", "GO", "AP"),
cursos = c(1, 2, 4, 22, 2, 2, 1, 9, 3, 2, 6, 4, 1, 4, 3, 2, 11, 6, 7, 0, 0, 0, 0, 0, 0, 0, 0))
mapa_estado <- mapa_estado %>% st_transform(4326)
dados_mapa = mapa_estado %>%
left_join(cursos_estado)
bins <- c(0, 4, 8, 12, 14, 16, 20, 24)
qpal = colorBin("Blues", dados_mapa$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_estados <- dados_mapa %>%
leaflet() %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal(dados_mapa$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa$cursos,
pal = qpal,
position = "bottomleft",
title = "Cursos por estado")
mapa_cursos_estados
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
View(dados_mapa_regiao)
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
mapa_regiao <- mapa_regiao %>% st_transform(4326)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
bins <- c(0, 10, 20, 30, 40)
qpal2 = colorBin("Blues", dados_mapa_regiao$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa_regiao$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_regiao <- dados_mapa_regiao %>%
leaflet() %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal2(dados_mapa_regiao$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa_regiao$cursos,
pal = qpal2,
position = "bottomleft",
title = "Cursos por região")
mapa_cursos_regiao
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
mapa_regiao <- mapa_regiao %>% st_transform(4326)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
bins <- c(0, 10, 20, 30, 40)
qpal2 = colorBin("Green", dados_mapa_regiao$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa_regiao$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_regiao <- dados_mapa_regiao %>%
leaflet() %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal2(dados_mapa_regiao$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa_regiao$cursos,
pal = qpal2,
position = "bottomleft",
title = "Cursos por região")
mapa_cursos_regiao
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
mapa_regiao <- mapa_regiao %>% st_transform(4326)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
bins <- c(0, 10, 20, 30, 40)
qpal2 = colorBin("Greens", dados_mapa_regiao$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa_regiao$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_regiao <- dados_mapa_regiao %>%
leaflet() %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal2(dados_mapa_regiao$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa_regiao$cursos,
pal = qpal2,
position = "bottomleft",
title = "Cursos por região")
mapa_cursos_regiao
library(flexdashboard)
library(tidyverse)
library(data.table)
library(descr)
library(RColorBrewer)
library(hrbrthemes)
library(kableExtra)
library(janitor)
library(skimr)
library(knitr)
library(htmltools)
library(DT)
library(leaflet)
library(sf)
library(shiny)
library(plotly)
library(ggthemes)
library(forcats)
library(crosstalk)
library(summarywidget)
library(skimr)
library(mice)
library(readr)
library(lubridate)
library(skimr)
library(psych)
library(ggplot2)
library(formattable)
library(geobr)
options(knitr.table.format = "html")
#Sys.setlocale('LC_CTYPE','C')
Sys.setlocale("LC_ALL","pt_BR.UTF-8")
cursos <- read_csv2("data/cursos_cemave_2023.csv")
participantes <- read_csv2("data/participantes_cemave_2023.csv")
participantes <- read_csv2("data/participantes_cemave_2023.csv")
alunos <- read_csv2("data/alunos_cemave_2023.csv")
alunos <- read_csv2("data/alunos_cemave_2023.csv")
instrutores <- read_csv2("data/instrutores_cemave_2023.csv")
cursos$ID <- as.character(cursos$ID)
cursos$ID <- as.character(cursos$ID)
alunos$ID <- as.character(alunos$ID)
alunos$ID <- as.character(alunos$ID)
instrutores$ID <- as.character(instrutores$ID)
instrutores$ID <- as.character(instrutores$ID)
cursos.alunos <- full_join(cursos, alunos, by = "ID")
mapa_regiao <- geobr::read_region()
mapa_regiao <- mapa_regiao %>%
rename(regiao = name_region)
mapa_regiao <- mapa_regiao %>%
mutate(regiao = recode(regiao, "Centro Oeste" = "Centro-Oeste"))
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
mapa_regiao <- mapa_regiao %>% st_transform(4326)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
bins <- c(0, 10, 20, 30, 40)
qpal2 = colorBin("Greens", dados_mapa_regiao$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa_regiao$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_regiao <- dados_mapa_regiao %>%
leaflet() %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal2(dados_mapa_regiao$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa_regiao$cursos,
pal = qpal2,
position = "bottomleft",
title = "Cursos por região")
mapa_cursos_regiao
mapa_estado <- geobr::read_state()
mapa_estado <- mapa_estado %>%
rename(UF = abbrev_state)
mapa_estado <- mapa_estado %>%
rename(regiao = name_region)
mapa_estado <- mapa_estado %>%
mutate(name_state = recode(name_state, "Rio Grande Do Norte" = "Rio Grande do Norte",
"Rio Grande Do Sul" = "Rio Grande do Sul",
"Mato Grosso Do Sul" = "Mato Grosso do Sul",
"Rio De Janeiro" = "Rio de Janeiro"))
mapa_estado <- mapa_estado %>%
mutate(regiao = recode(regiao, "Centro Oeste" = "Centro-Oeste"))
cursos_estado <- data.frame(
UF = c("AM", "BA", "CE", "DF", "ES", "MA", "MG", "MS", "MT", "PA", "PB", "PE", "PI", "PR", "RJ", "RN", "RS", "SC", "SP", "RO", "RR", "AC", "TO", "SE", "AL", "GO", "AP"),
cursos = c(1, 2, 4, 22, 2, 2, 1, 9, 3, 2, 6, 4, 1, 4, 3, 2, 11, 6, 7, 0, 0, 0, 0, 0, 0, 0, 0))
mapa_estado <- mapa_estado %>% st_transform(4326)
dados_mapa = mapa_estado %>%
left_join(cursos_estado)
bins <- c(0, 4, 8, 12, 14, 16, 20, 24)
qpal = colorBin("Greens", dados_mapa$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_estados <- dados_mapa %>%
leaflet() %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal(dados_mapa$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa$cursos,
pal = qpal,
position = "bottomleft",
title = "Cursos por estado")
mapa_cursos_estados
install.packages("colorRamps")
library(colorRamps)
library(psych)
G16 <-  instrutores %>%
group_by(participantes) %>%
summarise(count = n()) %>%
arrange(desc(count)) %>%
filter(count > 3) %>%
ggplot(aes(x = fct_reorder(participantes, count, .desc = F), y = count)) +
geom_col(color = "#e9ecef",  fill="#69b3a2") +
coord_flip() +
theme_minimal() +
theme(
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
) +
xlab(" ") +
ylab("Cursos ministrados") +
scale_y_continuous(limits=c(0, 10)) +
scale_y_continuous(breaks = seq(0, 10, by = 2), name = "Cursos ministrados ")
ggplotly(G16)
color <- colorRampPalette(c("darkgreen","lightgreen"))
View(color)
G17 <-  instrutores %>%
filter(!is.na(tipos.inst)) %>%
group_by(tipos.inst) %>%
summarise(count = n()) %>%
ggplot(aes(x = fct_reorder(tipos.inst, count, .desc = F), y = count)) +
geom_col(color = "#e9ecef",  fill= color) +
scale_x_discrete(name = " ") +
scale_y_continuous(name = "Número de instrutores") +
scale_x_discrete(name = " ", labels = c('Empresas', 'Forças de Segurança', 'Museus & Afins',  'Terceiro Setor',  'Ensino & Pesquisa', 'Órgãos Ambientais')) +
coord_flip() +
theme_minimal() +
theme(
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
)
ggplotly(G17)
G17 <-  instrutores %>%
filter(!is.na(tipos.inst)) %>%
group_by(tipos.inst) %>%
summarise(count = n())
library(flexdashboard)
mapa_estado <- geobr::read_state()
mapa_estado <- mapa_estado %>%
rename(UF = abbrev_state)
library(tidyverse)
library(data.table)
library(descr)
library(RColorBrewer)
library(hrbrthemes)
library(kableExtra)
library(janitor)
library(skimr)
library(knitr)
library(htmltools)
library(DT)
library(leaflet)
library(sf)
library(shiny)
library(plotly)
library(ggthemes)
library(forcats)
library(crosstalk)
library(summarywidget)
library(skimr)
library(mice)
library(colorRamps)
library(readr)
library(lubridate)
library(skimr)
library(psych)
library(ggplot2)
library(formattable)
library(geobr)
options(knitr.table.format = "html")
#Sys.setlocale('LC_CTYPE','C')
Sys.setlocale("LC_ALL","pt_BR.UTF-8")
crs <- leafletCRS(crsClass = "L.Proj.CRS", code = "ESRI:102003",
proj4def = "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=37.5 +lon_0=-96 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",
resolutions = 1.5^(25:15))
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
mapa_regiao <- mapa_regiao %>% st_transform(4326)
crs <- leafletCRS(crsClass = "L.Proj.CRS", code = 4326,
proj4def = "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=37.5 +lon_0=-96 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",
resolutions = 1.5^(25:15))
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
#mapa_regiao <- mapa_regiao %>% st_transform(4326)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
mapa_regiao <- geobr::read_region()
mapa_regiao <- mapa_regiao %>%
rename(regiao = name_region)
mapa_regiao <- mapa_regiao %>%
mutate(regiao = recode(regiao, "Centro Oeste" = "Centro-Oeste"))
crs <- leafletCRS(crsClass = "L.Proj.CRS", code = 4326,
proj4def = "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=37.5 +lon_0=-96 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",
resolutions = 1.5^(25:15))
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
#mapa_regiao <- mapa_regiao %>% st_transform(4326)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
bins <- c(0, 10, 20, 30, 40)
qpal2 = colorBin("Greens", dados_mapa_regiao$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa_regiao$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_regiao <- dados_mapa_regiao %>%
leaflet(options = leafletOptions(crs = crs)) %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal2(dados_mapa_regiao$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa_regiao$cursos,
pal = qpal2,
position = "bottomleft",
title = "Cursos por região")
mapa_cursos_regiao
crs <- leafletCRS(crsClass = "L.Proj.CRS", code = 4326,
proj4def = "+proj=longlat +datum=WGS84",
resolutions = 1.5^(25:15))
cursos_regiao <- data.frame(
regiao = c("Norte", "Nordeste", "Centro-Oeste", "Sudeste", "Sul"),
cursos = c(3, 21, 34, 13, 21))
#mapa_regiao <- mapa_regiao %>% st_transform(4326)
dados_mapa_regiao = mapa_regiao %>%
left_join(cursos_regiao)
bins <- c(0, 10, 20, 30, 40)
qpal2 = colorBin("Greens", dados_mapa_regiao$cursos, bins = bins)
labels <- sprintf("<strong>%s</strong>", dados_mapa_regiao$cursos) %>% lapply(htmltools::HTML)
mapa_cursos_regiao <- dados_mapa_regiao %>%
leaflet(options = leafletOptions(crs = crs)) %>%
addPolygons(stroke = TRUE,
opacity = 1.0,
fillOpacity = 1.0,
smoothFactor = 0.5,
color = "white",
fillColor = ~qpal2(dados_mapa_regiao$cursos),
weight = 1,
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal",
padding = "3px 8px"),
textsize = "15px",
direction = "auto"),
highlight = highlightOptions(weight = 1,
color = "grey",
fillOpacity = 0.9,
bringToFront = T)) %>%
addLegend(values = ~dados_mapa_regiao$cursos,
pal = qpal2,
position = "bottomleft",
title = "Cursos por região")
mapa_cursos_regiao
